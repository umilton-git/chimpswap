{"ast":null,"code":"import { useState, useLayoutEffect } from 'react';\nimport { shade } from 'polished';\nimport Vibrant from 'node-vibrant';\nimport { hex } from 'wcag-contrast';\nimport { ChainId } from '@uniswap/sdk';\nimport uriToHttp from 'utils/uriToHttp';\n\nasync function getColorFromToken(token) {\n  if (token.chainId === ChainId.RINKEBY && token.address === '0xc7AD46e0b8a400Bb3C915120d284AafbA8fc4735') {\n    return Promise.resolve('#FAAB14');\n  }\n\n  const path = `https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/${token.address}/logo.png`;\n  return Vibrant.from(path).getPalette().then(palette => {\n    if (palette === null || palette === void 0 ? void 0 : palette.Vibrant) {\n      let detectedHex = palette.Vibrant.hex;\n      let AAscore = hex(detectedHex, '#FFF');\n\n      while (AAscore < 3) {\n        detectedHex = shade(0.005, detectedHex);\n        AAscore = hex(detectedHex, '#FFF');\n      }\n\n      return detectedHex;\n    }\n\n    return null;\n  }).catch(() => null);\n}\n\nasync function getColorFromUriPath(uri) {\n  const formattedPath = uriToHttp(uri)[0];\n  return Vibrant.from(formattedPath).getPalette().then(palette => {\n    if (palette === null || palette === void 0 ? void 0 : palette.Vibrant) {\n      return palette.Vibrant.hex;\n    }\n\n    return null;\n  }).catch(() => null);\n}\n\nexport function useColor(token) {\n  const [color, setColor] = useState('#2172E5');\n  useLayoutEffect(() => {\n    let stale = false;\n\n    if (token) {\n      getColorFromToken(token).then(tokenColor => {\n        if (!stale && tokenColor !== null) {\n          setColor(tokenColor);\n        }\n      });\n    }\n\n    return () => {\n      stale = true;\n      setColor('#2172E5');\n    };\n  }, [token]);\n  return color;\n}\nexport function useListColor(listImageUri) {\n  const [color, setColor] = useState('#2172E5');\n  useLayoutEffect(() => {\n    let stale = false;\n\n    if (listImageUri) {\n      getColorFromUriPath(listImageUri).then(color => {\n        if (!stale && color !== null) {\n          setColor(color);\n        }\n      });\n    }\n\n    return () => {\n      stale = true;\n      setColor('#2172E5');\n    };\n  }, [listImageUri]);\n  return color;\n}","map":{"version":3,"sources":["C:/Users/Ulyss/chimpswap/chimpswap-interface-main/src/hooks/useColor.ts"],"names":["useState","useLayoutEffect","shade","Vibrant","hex","ChainId","uriToHttp","getColorFromToken","token","chainId","RINKEBY","address","Promise","resolve","path","from","getPalette","then","palette","detectedHex","AAscore","catch","getColorFromUriPath","uri","formattedPath","useColor","color","setColor","stale","tokenColor","useListColor","listImageUri"],"mappings":"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","sourcesContent":["import { useState, useLayoutEffect } from 'react'\nimport { shade } from 'polished'\nimport Vibrant from 'node-vibrant'\nimport { hex } from 'wcag-contrast'\nimport { Token, ChainId } from '@uniswap/sdk'\nimport uriToHttp from 'utils/uriToHttp'\n\nasync function getColorFromToken(token: Token): Promise<string | null> {\n  if (token.chainId === ChainId.RINKEBY && token.address === '0xc7AD46e0b8a400Bb3C915120d284AafbA8fc4735') {\n    return Promise.resolve('#FAAB14')\n  }\n\n  const path = `https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/${token.address}/logo.png`\n\n  return Vibrant.from(path)\n    .getPalette()\n    .then(palette => {\n      if (palette?.Vibrant) {\n        let detectedHex = palette.Vibrant.hex\n        let AAscore = hex(detectedHex, '#FFF')\n        while (AAscore < 3) {\n          detectedHex = shade(0.005, detectedHex)\n          AAscore = hex(detectedHex, '#FFF')\n        }\n        return detectedHex\n      }\n      return null\n    })\n    .catch(() => null)\n}\n\nasync function getColorFromUriPath(uri: string): Promise<string | null> {\n  const formattedPath = uriToHttp(uri)[0]\n\n  return Vibrant.from(formattedPath)\n    .getPalette()\n    .then(palette => {\n      if (palette?.Vibrant) {\n        return palette.Vibrant.hex\n      }\n      return null\n    })\n    .catch(() => null)\n}\n\nexport function useColor(token?: Token) {\n  const [color, setColor] = useState('#2172E5')\n\n  useLayoutEffect(() => {\n    let stale = false\n\n    if (token) {\n      getColorFromToken(token).then(tokenColor => {\n        if (!stale && tokenColor !== null) {\n          setColor(tokenColor)\n        }\n      })\n    }\n\n    return () => {\n      stale = true\n      setColor('#2172E5')\n    }\n  }, [token])\n\n  return color\n}\n\nexport function useListColor(listImageUri?: string) {\n  const [color, setColor] = useState('#2172E5')\n\n  useLayoutEffect(() => {\n    let stale = false\n\n    if (listImageUri) {\n      getColorFromUriPath(listImageUri).then(color => {\n        if (!stale && color !== null) {\n          setColor(color)\n        }\n      })\n    }\n\n    return () => {\n      stale = true\n      setColor('#2172E5')\n    }\n  }, [listImageUri])\n\n  return color\n}\n"]},"metadata":{},"sourceType":"module"}